!function(t){"use strict";function e(){}t.fn.tagsInput=function(n){let a=t.extend({tagClass:"badge badge-primary",tagsContainerClass:"form-control",highlightColor:"#ffc107"},n);const i=new e,r=function(t){return i.fillIn('<div class="tag {tagClass}"><span>{value}</span>{tagRemoveIcon}</div>',{tagClass:i.sanitizeText(a.tagClass),tagRemoveIcon:t?"":'<i class="tag-remove">&#10006;</i>'})};this.each(function(){if(this.hasAttribute("data-rendered"))return;const e=this.hasAttribute("disabled"),n=r(e),o=function(t){return i.fillIn('<div class="tags-container {tagsContainerClass} {state}"><input type="text" size="1" {state}><div>',{tagsContainerClass:i.sanitizeText(a.tagsContainerClass),state:t?"disabled":""})}(e);let s=t(this),l=[],c=s.val();c&&t.each(c.split(";"),function(t,e){let a=e.trim();a.length>0&&l.unshift(jQuery(n.replace("{value}",a)))});let u=t(o);t.each(l,function(t,e){u.prepend(e)}),s.after(u),s.attr("hidden","true"),s.attr("data-rendered","true")}),t("i.tag-remove").click(i.removeTag),t(".tags-container").not("disabled").click(function(e){t(this).children("input").focus()}),t(".tags-container").not("disabled").children("input").bind("input",function(t){i.resetSize(this)});const o=r(!1);t(".tags-container").not("disabled").children("input").keydown(function(e){if("Enter"===e.key||";"===e.key){e.preventDefault();let n=t(e.currentTarget),r=n.val().trim();if(r){r=i.sanitizeText(r);let e=n.siblings("div").filter(function(){return t(this).find("span").text()===r});if(e.length>0)a.hasOwnProperty("tagColor")||(a.tagColor=e.css("background-color")),i.blink(e,a.highlightColor,a.tagColor);else{let e=t(o.replace("{value}",r));e.insertBefore(n),e.children("i").click(i.removeTag);let a=t(this).parent().prev(),s=a.val();s.length>0&&";"!=s.charAt(s.length-1)&&(s+=";"),n.val(""),i.resetSize(n),a.val(s.concat(r).concat(";"))}}return!1}})},e.prototype.resetSize=function(e){let n=t(e),a=n.val().length;n.attr("size",a<1?1:a)},e.prototype.removeTag=function(e){let n=t(this),a=n.parent(),i=a.parent().prev(),r=n.siblings("span").text(),o=i.val(),s="(^".concat(r).concat(";)|(;").concat(r).concat(";)"),l=o.replace(new RegExp(s,"u"),";");i.val(l),a.remove()},e.prototype.sanitizeText=function(e){return t("<div>").text(e).html()},e.prototype.blink=function(e,n,a){let i=t(e);i.stop().animate({backgroundColor:n},200).promise().done(function(){i.animate({backgroundColor:a},200)})},e.prototype.fillIn=function(t,e){return t.replace(new RegExp("{([^{]+)}","g"),function(t,n){return void 0===e[n]?"{".concat(n).concat("}"):e[n]})}}(jQuery);